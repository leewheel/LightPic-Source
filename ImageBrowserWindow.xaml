<Window x:Class="LightPic_Source.ImageBrowserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
         x:Name="ImageBrowser"
         Title="å›¾ç‰‡æµè§ˆå™¨ - LightPic-Source" Height="700" Width="1200"
         WindowStyle="None"
         AllowsTransparency="True"
         Background="#0a0a0a"
         BorderThickness="2"
         BorderBrush="#9932CC"
         ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Consolas, Courier New"/>
            <Setter Property="Foreground" Value="#00FF00"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#00FF00"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#00FF00"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="8,4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#003300"/>
                    <Setter Property="Foreground" Value="#CCFFCC"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="ListBox">
            <Setter Property="Background" Value="#001100"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style TargetType="ScrollBar">
            <Setter Property="Background" Value="#001100"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨æŽ§åˆ¶æ  -->
        <Grid Grid.Row="0" Background="#050505" MouseLeftButtonDown="TopBar_MouseLeftButtonDown">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0">
                <TextBlock Text="ðŸ–¼ï¸ " FontSize="16"/>
                <TextBlock Text="å›¾ç‰‡æµè§ˆå™¨" FontSize="14" VerticalAlignment="Center"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,5,0">
                <Button Content="ðŸ“" Width="35" Height="25" Click="BrowseFolder_Click" ToolTip="é€‰æ‹©ç›®å½•"/>
                <Button Content="ðŸ”„" Width="35" Height="25" Click="Refresh_Click" ToolTip="åˆ·æ–°"/>
                <Button Content="ðŸ”+" Width="35" Height="25" Click="ZoomIn_Click" ToolTip="æ”¾å¤§"/>
                <Button Content="ðŸ”-" Width="35" Height="25" Click="ZoomOut_Click" ToolTip="ç¼©å°"/>
                <Button Content="ðŸ”„ï¸" Width="35" Height="25" Click="ResetZoom_Click" ToolTip="é‡ç½®ç¼©æ”¾"/>
                <Button Content="â”€" Width="35" Height="25" Click="Minimize_Click" BorderThickness="0"/>
                <Button Content="â˜" Width="35" Height="25" Click="Maximize_Click" BorderThickness="0"/>
                <Button Content="âœ•" Width="35" Height="25" Click="Close_Click" BorderThickness="0" Foreground="#FF5555" BorderBrush="#FF5555"/>
            </StackPanel>

            <Line X1="0" Y1="39" X2="{Binding ActualWidth, ElementName=ImageBrowser}" Y2="39" Stroke="#00FF00" StrokeThickness="0.5" Opacity="0.5"/>
        </Grid>

        <!-- ä¸»å†…å®¹åŒºï¼šä¸‰æ å¸ƒå±€ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220" MinWidth="150" MaxWidth="350"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="280" MinWidth="200" MaxWidth="400"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ä¾§ï¼šç¼©ç•¥å›¾åˆ—è¡¨ -->
            <Border Grid.Column="0" BorderBrush="#00FF00" BorderThickness="0,0,1,0" Background="#001100">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="118"/>
                        <RowDefinition Height="Auto" MinHeight="20"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <!-- é¡¶éƒ¨å·¥å…·æ  -->
                    <StackPanel Grid.Row="0" Margin="5,5,5,3">
                        <TextBlock Text="ðŸ“ ç›®å½•æ“ä½œ" FontSize="11" Foreground="#00AA00" Margin="0,0,0,5"/>
                        <Button Content="ðŸ“‚ æ‰“å¼€ç›®å½•" Height="28" Click="BrowseFolder_Click" Margin="0,2"/>
                        <Button Content="ðŸ”„ åˆ·æ–°åˆ—è¡¨" Height="28" Click="Refresh_Click" Margin="0,2"/>
                        <Button Content="ðŸ“‚ æ‰“å¼€Comfyuiç›®å½•" Height="28" Click="BrowseComfyuiFolder_Click"/>
                    </StackPanel>

                    <!-- å½“å‰è·¯å¾„æ˜¾ç¤º -->
                    <TextBlock Grid.Row="1" x:Name="CurrentPathText" Text="å½“å‰ç›®å½•ï¼š" FontSize="10" 
                               Foreground="#008800" Margin="5,2,5,2" TextTrimming="CharacterEllipsis"/>

                    <!-- ç¼©ç•¥å›¾åˆ—è¡¨ -->
                    <ListBox Grid.Row="2" x:Name="ThumbnailList" SelectionChanged="ThumbnailList_SelectionChanged"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="2" Padding="2" Background="#002200" BorderBrush="#003300" BorderThickness="1"
                                        Width="180" Height="120">
                                    <Image Source="{Binding Thumbnail}" Stretch="Uniform" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                </Grid>
            </Border>

            <!-- ä¸­é—´ï¼šä¸»å›¾ç‰‡é¢„è§ˆåŒº -->
            <Border Grid.Column="1" BorderBrush="#00FF00" BorderThickness="0,0,1,0" Background="#000000">
                <Grid>
                    <!-- ç¼©æ”¾æŽ§åˆ¶æŒ‰é’®ç»„ - å·¦ä¸Šè§’ -->
                    <Border HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10" Background="#002200" BorderBrush="#003300" BorderThickness="1" Padding="5">
                        <StackPanel>
                            <Button Content="ðŸ”+" Height="40" Width="60" FontSize="20" Click="ZoomIn_Click" Margin="0,2"/>
                            <Button Content="ðŸ”„ï¸" Height="40" Width="60" FontSize="18" Click="ResetZoom_Click" Margin="0,2"/>
                            <Button Content="ðŸ”-" Height="40" Width="60" FontSize="20" Click="ZoomOut_Click" Margin="0,2"/>
                        </StackPanel>
                    </Border>

                    <!-- ç¼©æ”¾æ¯”ä¾‹æ˜¾ç¤º -->
                    <TextBlock x:Name="ZoomLevelText" Text="100%" FontSize="14" Foreground="#00FF00"
                               HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10"
                               Background="#002200" Padding="8,4"/>

                    <ScrollViewer x:Name="ImageScrollViewer" HorizontalScrollBarVisibility="Auto" 
                                  VerticalScrollBarVisibility="Auto" Background="#000000"
                                  Margin="0,0,0,0" PreviewMouseWheel="ImageScrollViewer_PreviewMouseWheel">
                        <Image x:Name="MainImage" Stretch="Uniform" RenderTransformOrigin="0.5,0.5"
                               PreviewMouseWheel="MainImage_PreviewMouseWheel"
                               MouseLeftButtonDown="MainImage_MouseLeftButtonDown"
                               MouseMove="MainImage_MouseMove"
                               MouseLeftButtonUp="MainImage_MouseLeftButtonUp">
                            <Image.RenderTransform>
                                <ScaleTransform x:Name="ImageScale"/>
                            </Image.RenderTransform>
                        </Image>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- å³ä¾§ï¼šå›¾ç‰‡å±žæ€§æ  -->
            <Border Grid.Column="2" Background="#001100">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="10">
                        <TextBlock Text="ðŸ“Š å›¾ç‰‡å±žæ€§" FontSize="14" FontWeight="Bold" 
                                   Foreground="#00FF00" Margin="0,0,0,10"/>

                        <!-- æ–‡ä»¶ä¿¡æ¯ -->
                        <TextBlock Text="æ–‡ä»¶ä¿¡æ¯" FontSize="12" FontWeight="Bold" 
                                   Foreground="#00AA00" Margin="0,10,0,5"/>
                        <Border Background="#002200" BorderBrush="#003300" BorderThickness="1" Padding="8">
                            <StackPanel x:Name="FileInfoPanel">
                                <TextBlock Text="æ–‡ä»¶åï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FileName" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="æ–‡ä»¶å¤§å°ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FileSize" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="æ–‡ä»¶è·¯å¾„ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FilePath" Text="-" FontSize="11" Margin="10,0,0,3" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Text="åˆ›å»ºæ—¶é—´ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FileCreated" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="ä¿®æ”¹æ—¶é—´ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FileModified" Text="-" FontSize="11" Margin="10,0,0,3"/>
                            </StackPanel>
                        </Border>

                        <!-- å›¾åƒä¿¡æ¯ -->
                        <TextBlock Text="å›¾åƒä¿¡æ¯" FontSize="12" FontWeight="Bold" 
                                   Foreground="#00AA00" Margin="0,10,0,5"/>
                        <Border Background="#002200" BorderBrush="#003300" BorderThickness="1" Padding="8">
                            <StackPanel x:Name="ImageInfoPanel">
                                <TextBlock Text="å›¾åƒå°ºå¯¸ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ImageDimensions" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="åˆ†è¾¨çŽ‡ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ImageResolution" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="é¢œè‰²æ·±åº¦ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ColorDepth" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="æ ¼å¼ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ImageFormat" Text="-" FontSize="11" Margin="10,0,0,3"/>
                                <TextBlock Text="çºµæ¨ªæ¯”ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="AspectRatio" Text="-" FontSize="11" Margin="10,0,0,3"/>
                            </StackPanel>
                        </Border>

                        <!-- EXIFä¿¡æ¯ -->
                        <TextBlock Text="EXIF ä¿¡æ¯" FontSize="12" FontWeight="Bold" 
                                   Foreground="#00AA00" Margin="0,10,0,5"/>
                        <Border Background="#002200" BorderBrush="#003300" BorderThickness="1" Padding="8">
                            <StackPanel x:Name="ExifInfoPanel">
                                <TextBlock Text="ç›¸æœºå“ç‰Œï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="CameraMake" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="ç›¸æœºåž‹å·ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="CameraModel" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="é•œå¤´ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="LensModel" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æ‹æ‘„æ—¶é—´ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="DateTime" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="å¿«é—¨é€Ÿåº¦ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ShutterSpeed" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="å…‰åœˆï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="Aperture" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="ISOï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ISOValue" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="ç„¦è·ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="FocalLength" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æ›å…‰è¡¥å¿ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ExposureComp" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æµ‹å…‰æ¨¡å¼ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="MeteringMode" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="é—ªå…‰ç¯ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="Flash" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="ç™½å¹³è¡¡ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="WhiteBalance" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æ›å…‰æ¨¡å¼ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="ExposureMode" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æ‹æ‘„æ¨¡å¼ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="SceneMode" Text="-" FontSize="11" Margin="10,0,0,2"/>
                            </StackPanel>
                        </Border>

                        <!-- GPSä¿¡æ¯ -->
                        <TextBlock Text="GPS å®šä½" FontSize="12" FontWeight="Bold" 
                                   Foreground="#00AA00" Margin="0,10,0,5"/>
                        <Border Background="#002200" BorderBrush="#003300" BorderThickness="1" Padding="8">
                            <StackPanel x:Name="GPSInfoPanel">
                                <TextBlock Text="çº¬åº¦ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="GPSLatitude" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="ç»åº¦ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="GPSLongitude" Text="-" FontSize="11" Margin="10,0,0,2"/>
                                <TextBlock Text="æµ·æ‹”ï¼š" FontSize="11" Foreground="#00AA00"/>
                                <TextBlock x:Name="GPSAltitude" Text="-" FontSize="11" Margin="10,0,0,2"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</Window>